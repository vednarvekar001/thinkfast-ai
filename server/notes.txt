thinkfast-ai/
â””â”€â”€ backend/
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ app.ts
    â”‚   â”œâ”€â”€ server.ts
    â”‚
    â”‚   â”œâ”€â”€ config/
    â”‚   â”‚   â”œâ”€â”€ cloudinary.ts
    â”‚   â”‚   â”œâ”€â”€ db.ts
    |   |   â””â”€â”€ jwt.ts
    â”‚
    â”‚   â”œâ”€â”€ controllers/
    â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
    â”‚   â”‚   â”œâ”€â”€ chat.controller.ts
    â”‚   â”‚   â”œâ”€â”€ upload.controller.ts
    â”‚   â”‚   â””â”€â”€ user.controller.ts
    â”‚
    â”‚   â”œâ”€â”€ middlewares/
    â”‚   â”‚   â”œâ”€â”€ auth.middleware.ts            // âœ… checkAuth
    â”‚   â”‚   â”œâ”€â”€ chatUpload.middleware.ts      // âœ… multer for chat files
    â”‚   â”‚   â”œâ”€â”€ profileUpload.middleware.ts   // âœ… multer + cloudinary resize
    â”‚   â”‚   â”œâ”€â”€ error.middleware.ts
    â”‚   â”‚   â””â”€â”€ rateLimit.middleware.ts
    â”‚
    â”‚   â”œâ”€â”€ models/
    â”‚   â”‚   â”œâ”€â”€ user.model.ts
    â”‚   â”‚   â”œâ”€â”€ chat.model.ts
    â”‚   â”‚   â””â”€â”€ upload.model.ts
    â”‚
    â”‚   â”œâ”€â”€ routes/
    â”‚   â”‚   â”œâ”€â”€ auth.routes.ts
    â”‚   â”‚   â”œâ”€â”€ chat.routes.ts
    â”‚   â”‚   â”œâ”€â”€ upload.routes.ts
    â”‚   â”‚   â””â”€â”€ user.routes.ts
    â”‚
    â”‚   â”œâ”€â”€ ai/
    â”‚   â”‚   â”œâ”€â”€ ai.service.ts
    â”‚   â”‚   â””â”€â”€ provider/
    â”‚   â”‚       â”œâ”€â”€ openrouter.ts
    â”‚   â”‚       â”œâ”€â”€ ollama.ts
    â”‚   â”‚       â””â”€â”€ groq.ts
    â”‚
    â”‚   â”œâ”€â”€ utils/
    â”‚   â”‚   â”œâ”€â”€ extractText.ts
    â”‚   â”‚   â””â”€â”€ validateFile.ts
    â”‚
    â”‚   â””â”€â”€ types/
    â”‚       â””â”€â”€ express/index.d.ts
    â”‚
    â”œâ”€â”€ .env
    â”œâ”€â”€ .env.template
    â”œâ”€â”€ .gitignore
    â”œâ”€â”€ package.json
    â”œâ”€â”€ tsconfig.json


âœ… What This Includes
ğŸ’¬ Chat System
Chat routes & controller

MongoDB chat memory per user

Streaming or prompt-based OpenRouter/Ollama support

ğŸ“„ Uploads (Images / PDFs)
Separate chatUpload.middleware.ts (folder: chat-uploads)

profileUpload.middleware.ts (folder: profile_pictures)

extractText.ts uses tesseract.js and pdf-parse

ğŸ‘¤ User System
Register, login, logout

Update profile picture

View profile (Settings page with name/email shown, editable profile pic only)

ğŸ›¡ï¸ Auth System
JWT-based auth.middleware.ts

Protected routes

Token generation and cookie handling

â˜ï¸ Cloudinary Integration
Separate CloudinaryStorage config for chatUpload and profileUpload

ğŸ“¦ MongoDB Models
User, Upload, and Chat models with Mongoose

ğŸ§  AI Memory + History
AI chat remembers past messages (stored in chat.model.ts)

Can later plug into vector search or fine-tuned models


âœ… Phase 1: Core System Setup
| Step | What                                 | Why                           |
| ---- | ------------------------------------ | ----------------------------- |
| 1ï¸âƒ£  | `src/config/db.ts`                   | Setup DB connection (MongoDB) |
| 2ï¸âƒ£  | `src/lib/jwt.ts`                     | JWT functions for auth        |
| 3ï¸âƒ£  | `src/models/user.model.ts`           | Base User model               |
| 4ï¸âƒ£  | `src/middlewares/auth.middleware.ts` | `checkAuth` middleware        |
| 5ï¸âƒ£  | `src/controllers/auth.controller.ts` | Login, register, logout logic |
| 6ï¸âƒ£  | `src/routes/auth.routes.ts`          | Route to wire up the above    |



âœ… Phase 2: AI & Uploads
| Step | What                                 | Why                                  |
| ---- | ------------------------------------ | ------------------------------------ |
| 7ï¸âƒ£  | `src/ai/provider/openrouter.ts`      | Base model provider (OpenRouter)     |
| 8ï¸âƒ£  | `src/ai/ai.service.ts`               | AI chat with memory                  |
| 9ï¸âƒ£  | `src/models/chat.model.ts`           | For saving chat memory in DB         |
| ğŸ”Ÿ   | `src/controllers/chat.controller.ts` | Actual chat logic (input â†’ response) |
| ğŸ”   | `src/routes/chat.routes.ts`          | AI chat route                        |



âœ… Phase 3: Uploads
| Step | What                                       | Why                             |
| ---- | ------------------------------------------ | ------------------------------- |
| 11ï¸âƒ£ | `profileUpload.middleware.ts` + Cloudinary | For profile pics                |
| 12ï¸âƒ£ | `chatUpload.middleware.ts` + Cloudinary    | For PDF/image questions uploads |
| 13ï¸âƒ£ | `upload.controller.ts`                     | OCR + save to DB                |
| 14ï¸âƒ£ | `upload.model.ts`                          | Save uploaded file data         |
| 15ï¸âƒ£ | `upload.routes.ts`                         | Route for upload/fetch          |



âœ… Phase 4: Extras & Finalization
| Step | What                       | Why                          |
| ---- | -------------------------- | ---------------------------- |
| âœ…    | `user.controller.ts`       | View/update profile pic      |
| âœ…    | `user.routes.ts`           | For `/settings` etc          |
| âœ…    | `types/express/index.d.ts` | Type-safe `req.user`         |
| âœ…    | `error.middleware.ts`      | Centralized error handler    |
| âœ…    | `rateLimit.middleware.ts`  | Optional for DDoS/throttling |
